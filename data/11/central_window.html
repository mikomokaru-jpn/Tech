<!-- 
17 WindowResize
-->
<DOCTYPE HTML>
<html id="mainhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>スクリーンの中央に正方形のビューを持ったウィンドウを表示する</title>
	<link rel="stylesheet" type="text/css" href="/lib/document.css">
</head>
<body id="mainbody">
<!-- ↓↓↓↓↓↓↓↓↓↓↓ -->
<script type="text/javascript" src="/lib/funcs1.js"></script>
<!-- ↑↑↑↑↑↑↑↑↑↑ -->
<div id="content">
<h2 class="lm70 tm20 bm0">スクリーンの中央に正方形のビューを持ったウィンドウを</h2>
<h2 class="lm70 tm0 bm5">表示する</h2>
<div class="lm100 tm10 rm60">
ウィンドウは上部にタイトルバーがあるので、高さがやや高い長方形となる。ウィンドウの大きさを決めるとき、このタイトルバーの高さを考慮する必要がある。
</div>
<div class="lm100 tm20 rm40 bm0">
処理の流れ
</div>
<div class="lm100 tm0" style="width:530px; border-top:solid 1px #909090;"></div>
<h3 class="lm100 tm10 bm0 rm60">
ウィンドウを作成する
</h3>
<div class="lm100 tm5 rm60">
インタフェースビルダーで任意の大きさのウィンドウを作成する。ウィンドウの大きさは、アプリケーション起動時に計算し、正しい大きさと位置に変更する。
</div>
<h3 class="lm100 tm20 bm0 rm60">
アプリケーション起動時
</h3>
<!--div class="lm100 tm0" style="width:530px; border-top:solid 1px #909090;"></div-->
<div class="lm100 tm5 rm60">
(1) ウィンドウの大きさを変更する
</div>
<div class="lm130 tm0 rm60">
ウィンドウの幅 = ビューの幅
</div>
<div class="lm130 tm0 rm60">
ウィンドウの高さ = (ビューの高さ＋タイトルバーの高さ)
</div>
<div class="lm130 tm10 rm60">
タイトルバーの高さは、システムで一意に決まる。
</div>
<div class="lm130 tm0 rm60">
ウィンドウの高さとコンテントビューの高さの差がタイトルバーの高さとなる。これはどのような大きさのウィンドウであっても必ず同じとなる。
</div>
<div class="lm130 tm10 rm60">
コンテントビューの高さは、NSWindowクラスのcontentRectForFrameRectメソッドで求まる。これを使用して、任意のウィンドウ（何でも構わないので、インタフェースビルダで作成したウィンドウを使う）のタイトルバーの高さを求める。
</div>
<div class="lm100 tm10 rm60">
(2) ウィンドウの表示位置を決める
</div>
<div class="lm130 tm0 rm60">
スクリーンの中央にウィンドウが位置するよう、スクリーンの原点（左下）から、ウィンドウの起点（矩形の左下）までの距離を求める。
</div>
<div class="lm130 tm10 rm60">
X = スクリーンの中心(X) - ウィンドウの幅/2
</div>
<div class="lm130 tm0 rm60">
Y = スクリーンの中心点(Y) - ウィンドウの高さ/2 
</div>
<div class="lm100 tm30 rm60 bm0">
作成例
</div>
<div class="lm100 tm0" style="width:530px; border-top:solid 1px #909090;"></div>
<div class="lm100 tm5 rm60">
正方形のコンテントビュー（400x400）を持ったウィンドウを
</div>
<div class="lm100 tm0 rm60">
スクリーン（1280x773）の中央に表示する。
</div>
<!-- 画像 -->
<a href="/lib/HTMLofImage.html?filename=/data/11/11_central_window1.png&title=central window&width=700" target="_new">
<img class="lm100 tm20 bm0" src="11_central_window1" width="400" align="top" alt="central window" ></a>
<!--ソースコード-->
<iframe class="lm70 tm20" src="/lib/HTMLofText.html?filename=/data/11/central_window.txt" width="580" height="730"></iframe>
<div class="bm40"></div>
</div><!-- end of content -->
<!-- ↓↓↓↓↓↓↓↓↓↓↓ -->
<footer id="mainfooter">
<div class="tp10 bm10 bp10 textright"> 
<span class="rm500 font80"><a href="/lib/index1.html">メニューに戻る</a></span>
<span class="rm20 font80"><a href="#mainheader">TOPに戻る</a></span>
</div> 
</footer>
<!-- ↑↑↑↑↑↑↑↑↑↑ -->
<script type="text/javascript" src="/lib/access/access2.js"></script>
</body>
</html>





