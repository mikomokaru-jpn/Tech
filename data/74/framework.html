<!-- 
NewPractice/56 EasyFramework
NewPractice/84 MyClalendarFramework
NewPractice/84 TestForCalendarFramework
-->
<DOCTYPE HTML>
<html id="mainhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>フレームワークを作ってみる（カレンダクラスの提供）</title>
  <link rel="stylesheet" type="text/css" href="/lib/document.css">
</head>
<body id="mainbody">
<!-- ↓↓↓↓↓↓↓↓↓↓↓ -->
<script type="text/javascript" src="/lib/funcs1.js"></script>
<!-- ↑↑↑↑↑↑↑↑↑↑ -->
<div id="content">
<h2 class="lm70 tm20 bm0">フレームワークを作ってみる（カレンダクラスの提供）</h2>
<div class="lm100 tm10 bm0 rm60">
フレームワークは、機能を再利用する（使い回しする）ための手段のひとつ
</div>
<div class="lm100 tm5 rm60">
フレームワークは単なるフォルダである。フォルダには、宣言ファイル（.h）、ビルド時にリンクされるバイナリオブジェクト、各種リソースやドキュメントなどを格納する。
</div>
<div class="lm100 tm10 rm60">
アプリケーションはフレームワークをプロジェクト内に読み込むことで、フレームワークが提供する機能を利用することができる。本章では、シンプルカレンダーをひとつのクラスとして提供するフレームワークを作成してみる。
</div>
<!-- 画像 -->
<a href="/lib/HTMLofImage.html?filename=/data/74/calendar.png&title=calendar&width=500" target="_new">
<img class="lm90 tm10 bm0" src="calendar.png" alt="[calendar]" width="250"></a>
<h3 class="lm100 tm30 bm0 rm60">
開発の流れ
</h3>
<!-- 画像 -->
<a href="/lib/HTMLofImage.html?filename=/data/74/framework1.png&title=framework1=750" target="_new">
<img class="lm90 tm0 bm0" src="framework1.png" alt="[framework1]" width="500"></a>
<h3 class="lm100 tm30 bm0 rm60">
アプリケーション開発プロジェクト
</h3>
<div class="lm100 tm5 rm60">
フレームワークとして提供する機能を定義し、アプリケーションプロジェクトにおいて開発・テストを行う。
</div>
<h3 class="lm100 tm20 bm0 rm60">
フレームワーク作成プロジェクト
</h3>
<div class="lm100 tm5 rm60">
フレームワークプロジェクトを作成し、アプリケーションから必要な機能を切り出しプロジェクトに取り込む。
</div>
<div class="lm100 tm10 rm60">
＜具体的な手順＞
</div>
<div class="lm100 tm0 rm60">
アプリケーション開発プロジェクトから対象となるクラスファイル、リソースファイルをプロジェクト内にに追加する。フレームワークにヘッダファイル（プロジェクト名.h）が作成されているので、そこに追加したクラスのヘッダファイルのimport文を記述する。
</div>
<!-- 画像 -->
<a href="/lib/HTMLofImage.html?filename=/data/74/framework2.png&title=framework2=750" target="_new">
<img class="lm60 tm5 bm0" src="framework2.png" alt="[framework2]" width="500"></a>
<div class="lm100 tm20 rm60">
プロジェクトの設定（Build Phases）から、ヘッダファイルを公開するための操作を行う。Privateフォルダに設定されているヘッダファイルを全て Publicフォルダに移す。ヘッダファイルの「公開」は、フレームワーク内のクラス間の相互参照のために必要ということ。フレームワークを利用するアプリケーションに「公開」という意味ではない。
</div>
<!-- 画像 -->
<a href="/lib/HTMLofImage.html?filename=/data/74/framework3.png&title=framework3=750" target="_new">
<img class="lm100 tm5 bm0" src="framework3.png" alt="[framework3]" width="500"></a>
<div class="lm100 tm20 rm60">
以上ビルドすると必要なファイルが作成されフレームワークフォルダの中に格納される。
</div>
<!-- 画像 -->
<a href="/lib/HTMLofImage.html?filename=/data/74/framework4.png&title=framework4=750" target="_new">
<img class="lm100 tm5 bm0" src="framework4.png" alt="[framework4]" width="500"></a>
<h3 class="lm100 tm20 bm0 rm60">
フレームワークを利用するアプリケーション開発プロジェクト
</h3>
<div class="lm100 tm5 rm60">
アプリケーション開発プロジェクトを作成し、フレームワークを読み込む。
</div>
<div class="lm100 tm10 rm60">
必要な操作は、フレームワークフォルダをプロジェクト内におくこと。
</div>
<div class="lm100 tm0 rm60">
方法は、フレームワークフォルダを直接プロジェクトナビゲータ上にドラッグ＆ドロップする。プロジェクトの設定 > Genaral > Embedded Binaries からファイルの追加により行うのいずれでも可。
</div>
<div class="lm100 tm10 rm60">
General > Linked Frameworks and Libraries にフレームワークが指定されていること。これはフレームワークフォルダが追加された自動的に設定される。
</div>
<div class="lm100 tm10 rm60">
なお、フォルダのドラッグ＆ドロップを行うたびに設定が追加されていってしまうので、重複分はそのたびに削除すること。
</div>
<!-- 画像 -->
<a href="/lib/HTMLofImage.html?filename=/data/74/framework5.png&title=framework5=750" target="_new">
<img class="lm30 tm5 bm0" src="framework5.png" alt="[framework5]" width="550"></a>

<div class="lm100 tm20 rm60">
フレームワークを利用するために Framework Searchpathsを追加する。ただし、フレームワークをプロジェクト内にコピーしていれば、デフォルトで設定されているパスで良い。フレームワークを別のフォルダーに置いた場合に設定する。
</div>
<!-- 画像 -->
<a href="/lib/HTMLofImage.html?filename=/data/74/framework6.png&title=framework6=750" target="_new">
<img class="lm100 tm5 bm0" src="framework6.png" alt="[framework6]" width="500"></a>
<div class="lm100 tm20 rm60">
アプリケーションはフレームワークが提供するクラスを利用してプログラムを作成する。カレンダービューオブジェクトを作成し、アプリケーションのウィンドウに表示する。クラスの実行ライブラリはビルド時にアプリケーションとリンクする。
</div>
<!--ソースコード-->
<iframe class="lm100 tm5" src="/lib/HTMLofText.html?filename=/data/74/AppDelegate.txt" width="550" height="330"></iframe>
<h3 class="lm100 tm20 rm60 bm0">
Tips
</h3>
<div class="lm100 tm5 rm60">
フレームワークのプログラムがフレームワークのリソースを読み込むとき、Bundleの取得方法は次のようにすること。
</div>
<!--ソースコード-->
<iframe class="lm100 tm5" src="/lib/HTMLofText.html?filename=/data/74/bundle.txt" width="550" height="60"></iframe>
<div class="bp40"></div><!-- 空白行 -->
<!----------------------------------------------->
</div><!-- end of content -->
<footer id="mainfooter">
<div class="tp10 bm10 bp10 textright"> <span class="rm500 font80"><a href="/lib/index1.html">メニューに戻る</a></span><span class="rm20 font80"><a href="#mainheader">TOPに戻る</a></span></div>
</footer>
<script type="text/javascript" src="/lib/access/access2.js"></script>
</body>
</html>
