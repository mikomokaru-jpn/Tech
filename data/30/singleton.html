<!-- -->
<DOCTYPE HTML>
<html id="mainhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>シングルトンクラス</title>
	<link rel="stylesheet" type="text/css" href="/lib/document.css">
</head>
<body id="mainbody">
<!-- ↓↓↓↓↓↓↓↓↓↓↓ -->
<script type="text/javascript" src="/lib/funcs1.js"></script>
<!-- ↑↑↑↑↑↑↑↑↑↑ -->
<div id="content">
<h2 class="lm70 tm20 bm10">シングルトンクラス</h2>
<h3 class="lm100 tm10 rm40 bm0">
シングルトンクラスとは？
</h3>
<div class="lm100 tm5 rm40">
アプリケーションで共通的な処理、例えば、日付操作を行うコンビニエンスクラスを作成するとする。
</div>
<div class="lm100 tm10 rm40">
オブジェクトに保持する変数は、日付操作に必要なNSCalendarオブジェクトだけとし、インスタンス変数を持たないとしたら、インスタンスはアプリケーションに１つだけでよい。インスタンスをメモリに常駐させておき、アプリケーションが必要なとき参照するようにすれば効率的である。使用するたびに、新しいインスタンスを作成するのは、コスト的に無駄である。
</div>
<div class="lm110 tm5 rm40">
（注）
</div>
<div class="lm120 tm0 rm40">
共通的な処理をシングルトンにすると、パフォーマンス的にメリッットがあるというのは本当か、少々自信がない。オブジェクトの生成コストは、キャッシュメカニズム等の最適化により、実はかなり効率化されているように思う。
</div>
<div class="lm100 tm20 rm40">
また、複数のオブジェクトがひとつの情報を共有したい場合がある。
</div>
<div class="lm100 tm10 rm40">
トランザクション処理が典型だが、複数のオブジェクトが並行してそれぞれのトランザクションを処理するとき、シーケンシャルなID番号を付与することがある。このとき、共通的な情報（ID番号）を管理するオブジェクトをひとつだけ作成し、利用者である複数のオブジェクトがそれを共有することができれば好都合である。
</div>
<div class="lm100 tm10 rm40">
以上のような要求を実現する方式が、シングルトンクラスである。
</div>
<h3 class="lm100 tm20 bm0 rm40">
シングルトンクラスの仕様
</h3>
<div class="lm100 tm5 rm40">
インスタンスは、static属性とし、静的領域に永続して存在する。
</div>
<div class="lm100 tm10 rm40">
インスタンスを返すクラスメソッッドを提供する。初回の要求では、インスタンスを作成・初期化して返す。作成したインスタンスは静的領域に保持する。２回目以降の要求では、保持しているインスタンスを返す。
</div>
<div class="lm100 tm10 rm40">
間違ってクラスの作成と初期化を行い、個別のインスタンスを作成されないよう、規定のイニシャライザ（init）を無効化しておくことも必要であれば行う。
</div>
<h3 class="lm100 tm20 rm40 bm0">
シングルトンクラスの実装例
</h3>
<!--ソースコード-->
<iframe class="lm100 tm5 bm10" src="/lib/HTMLofText.html?filename=/data/30/Singleton.txt" width="550" height="650"></iframe>
<h3 class="lm100 tm10 rm40 bm0">
シングルトンクラスを利用する
</h3>
<!--ソースコード-->
<iframe class="lm100 tm5 bm10" src="/lib/HTMLofText.html?filename=/data/30/AppDelegate.txt" width="550" height="450"></iframe>
<div class="bp40"></div>	<!-- 空白行 -->
<!----------------------------------------------->
</div><!-- end of content -->
<footer id="mainfooter">
<div class="tp10 bm10 bp10 textright"> <span class="rm500 font80"><a href="../index1.php">メニューに戻る</a></span><span class="rm20 font80"><a href="#mainheader">TOPに戻る</a></span></div>
</footer>
<script type="text/javascript" src="../access/access2.js"></script>
</body>
</html>




