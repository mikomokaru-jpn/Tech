<!-- 
21-4 TableView
-->
<DOCTYPE HTML>
<html id="mainhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Cell Based テーブルビュー・イメージを表示する</title>
    <link rel="stylesheet" type="text/css" href="/lib/document.css">
</head>
<body id="mainbody">
<!-- ↓↓↓↓↓↓↓↓↓↓↓ -->
<script type="text/javascript" src="/lib/funcs1.js"></script>
<!-- ↑↑↑↑↑↑↑↑↑↑ -->
<div id="content">
<h2 class="lm70 tm20 bm0">Cell Based テーブルビュー・イメージを表示する</h2>
<!-- 画像 -->
<a href="/lib/HTMLofImage.html?filename=/data/50/tableviewOfImage01.png&title=テーブルビュー&width=800" target="_new">
<img class="lm70 tm10 bm0" src="tableviewOfImage01.png" alt="[テーブルビュー]" width="450"></a>
<h3 class="lm70 tm20 bm0 rm60">
<a href="/lib/HTMLofVideo.html?filename=/data/50/movie.mp4&title=healthCalendar&width=700" target="_new">
動画はこちら
</a>
</h3>
<h3 class="lm70 tm20 bm0 rm60">
仕様
</h3>
<div class="lm70 tm0" style="width:550px; border-top:solid 1px #909090;"></div>
<div class="lm70 tm5 rm60">
ファイルからイメージオブジェクト読み込み、１列のテーブルビューの各行に縮小したサムネール画像を展開する。クリックまたはカーソルの移動によりサムネール画像を選択したとき、イメージビューに画像を表示する。
</div>
<div class="lm70 tm20 rm60">
NSTableViewDataSourceプロトコルの tableView:objectValueForTableColumn:row:メソッドは文字列しか返せないので、ここでは nil を返す。その代わりNSTableViewDelegateの tableView:dataCellForTableColumn:row:メソッドを実装する。
</div>
<div class="lm70 tm10 rm60">
このメソッドはビューが再表示されるたびに呼ばれ、表示直前のTextFieldCellオブジェクトを取得することができる。セルにイメージを表示するには、このオブジェクトのプロパティにイメージを埋め込み、セルを描画すdrawWithFrame:inView:メソッドをオーバーライドすれば良い。
</div>
<h3 class="lm70 tm20 bm0 rm60">
実装
</h3>
<div class="lm70 tm0" style="width:550px; border-top:solid 1px #909090;"></div>
<h3 class="lm70 tm5 rm60 bm0">
インタフェースビルダでビューをデザインする
</h3>
<!-- 画像 -->
<a href="/lib/HTMLofImage.html?filename=/data/50/tableviewOfImage02.png&title=テーブルビュー&width=800" target="_new">
<img class="lm70 tm0 bm0" src="tableviewOfImage02.png" alt="[テーブルビュー]" width="450"></a>
<div class="lm70 tm20 bm0 rm60">
テーブルビューの属性の設定をプログラムにより行う。
</div>
<!-- ソースコード -->
<iframe class="lm70 tm5" src="/lib/HTMLofText.html?filename=/data/50/setAttributes.txt" width="580" height="300"></iframe>
<h3 class="lm70 tm30 rm60 bm0">
イメージファイルの一覧を取得する
</h3>
<div class="lm70 tm5 rm60">
指定したディレクトリの下にあるイメージファイルの一覧を求める処理
</div>
<div class="lm70 tm0 rm60">
ファイルがイメージファイル（JPEG, PNG etc..）であるかどうかは、ファイルの拡張子で示されるファイルタイプ（UTI）から判定する。
</div>
<!-- ソースコード -->
<iframe class="lm70 tm5" src="/lib/HTMLofText.html?filename=/data/50/makeFileList.txt" width="580" height="450"></iframe>
<h3 class="lm70 tm20 rm60 bm0">
イメージファイルを読み込み縮小する
</h3>
<div class="lm70 tm5 rm60">
イメージファイルからNSImageオブジェクトを読み込み、サムネイルの画像サイズ（100x100）に縮小する。縦横比は維持するので長方形の場合は上下または左右に余白が生じる。
</div>
<!-- ソースコード -->
<iframe class="lm70 tm5" src="/lib/HTMLofText.html?filename=/data/50/readImage.txt" width="580" height="670"></iframe>
<h3 class="lm70 tm20 rm60 bm0">
NSTableView DataSourceプロトコルの実装
</h3>
<div class="lm70 tm5 rm60">
tableView:objectValueForTableColumn:row:メソッドの戻り値は空白（nil）を返す。セルの表示は後述のデリゲートメソッドで行う。
</div>
<!-- ソースコード -->
<iframe class="lm70 tm5" src="/lib/HTMLofText.html?filename=/data/50/DataSource.txt" width="580" height="160"></iframe>
<h3 class="lm70 tm20 rm60 bm0">
NSTableView Delegateプロトコルの実装
</h3>
<div class="lm70 tm5 rm60">
tableView:dataCellForTableColumn:row:メソッドは、セルに表示するNSCellオブジェクトを返す。
</div>
<!-- ソースコード -->
<iframe class="lm70 tm5" src="/lib/HTMLofText.html?filename=/data/50/Delegate1.txt" width="580" height="160"></iframe>
<div class="lm70 tm20 rm60">
カスタムクラスのUAImageCell（NSCellのサブクラス）は、引数にとったNSImageオブジェクトをイニシャライザの中でセルに描画（drawInRect）する。
</div>
<!-- ソースコード -->
<iframe class="lm70 tm5" src="/lib/HTMLofText.html?filename=/data/50/UAImageCell.txt" width="580" height="670"></iframe>

<div class="lm70 tm20 rm60">
サムネール画像（テーブルビューの行）を選択したとき、イメージビューに画像を表示する。
</div>
<!-- ソースコード -->
<iframe class="lm70 tm5" src="/lib/HTMLofText.html?filename=/data/50/Delegate2.txt" width="580" height="80"></iframe>


<div class="bp40"></div>
<!-- 空白行 -->
<!----------------------------------------------->
</div><!-- end of content -->
<footer id="mainfooter">
<div class="tp10 bm10 bp10 textright"> <span class="rm500 font80"><a href="/lib/index1.html">メニューに戻る</a></span><span class="rm20 font80"><a href="#mainheader">TOPに戻る</a></span></div>
</footer>
<script type="text/javascript" src="/lib/access/access2.js"></script>
</body>
</html>




